<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encarregados - Processos e Procedimentos | P6/7ºBPM</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f4c75 0%, #1e6ba8 50%, #2eb872 100%);
            min-height: 100vh;
            padding: 20px;
        }

        /* Container Principal */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .title-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #2eb872, #0f4c75);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        h1 {
            color: white;
            font-size: 28px;
            font-weight: 600;
        }

        .subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            margin-top: 5px;
        }

        /* Cards de Estatísticas */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            background: rgba(255, 255, 255, 0.15);
        }

        .stat-number {
            font-size: 36px;
            font-weight: bold;
            color: #2eb872;
            margin-bottom: 5px;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
        }

        /* Controles */
        .controls {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            justify-content: space-between;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 15px 12px 45px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
            transition: all 0.3s;
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .search-input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.15);
            border-color: #2eb872;
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.6);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .btn.active {
            background: linear-gradient(135deg, #2eb872, #1e6ba8);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .btn-export {
            background: linear-gradient(135deg, #2eb872, #0f4c75);
        }

        .btn-export:hover {
            background: linear-gradient(135deg, #27a968, #0e4168);
        }

        /* Tabela */
        .table-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            max-height: 600px;
            overflow: hidden;
        }

        .table-wrapper {
            max-height: 500px;
            overflow-y: auto;
            border-radius: 8px;
        }

        .table-wrapper::-webkit-scrollbar {
            width: 8px;
        }

        .table-wrapper::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .table-wrapper::-webkit-scrollbar-thumb {
            background: rgba(46, 184, 114, 0.6);
            border-radius: 4px;
        }

        .table-wrapper::-webkit-scrollbar-thumb:hover {
            background: rgba(46, 184, 114, 0.8);
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
        }

        thead {
            background: rgba(0, 0, 0, 0.2);
        }

        th {
            padding: 15px;
            text-align: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            border-right: 2px solid rgba(255, 255, 255, 0.15);
            cursor: pointer;
            user-select: none;
            transition: all 0.3s;
            position: relative;
        }

        th:last-child {
            border-right: none;
        }

        th:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        th.sortable::after {
            content: '↕';
            position: absolute;
            right: 10px;
            opacity: 0.4;
            font-size: 12px;
        }

        th.sorted-asc::after {
            content: '↑';
            opacity: 1;
            color: #2eb872;
        }

        th.sorted-desc::after {
            content: '↓';
            opacity: 1;
            color: #2eb872;
        }

        tbody tr {
            transition: all 0.3s;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        tbody tr:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        td {
            padding: 15px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }

        td:last-child {
            border-right: none;
        }

        .encarregado-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .encarregado-info {
            display: flex;
            flex-direction: column;
            text-align: center;
        }

        .encarregado-name {
            font-weight: 600;
            color: white;
            font-size: 14px;
            text-align: center;
        }

        .process-count {
            text-align: center;
            font-weight: 600;
            color: white;
            background: rgba(0, 0, 0, 0.2);
            padding: 5px 10px;
            border-radius: 6px;
            min-width: 35px;
            display: inline-block;
        }

        .process-count.zero {
            opacity: 1;
            background: rgba(108, 117, 125, 0.6);
            color: white;
            border: 1px solid rgba(108, 117, 125, 0.8);
        }

        .process-count.high {
            background: rgba(231, 76, 60, 0.6);
            color: white;
            border: 1px solid rgba(231, 76, 60, 0.8);
        }

        .process-count.medium {
            background: rgba(241, 196, 15, 0.6);
            color: white;
            border: 1px solid rgba(241, 196, 15, 0.8);
        }

        .process-count.low {
            background: rgba(46, 184, 114, 0.6);
            color: white;
            border: 1px solid rgba(46, 184, 114, 0.8);
        }

        .total-cell {
            font-weight: bold;
            font-size: 16px;
            color: white;
            text-align: center;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-active {
            background: rgba(46, 184, 114, 0.2);
            color: #2eb872;
            border: 1px solid #2eb872;
        }

        .badge-inactive {
            background: rgba(231, 76, 60, 0.2);
            color: #ff6b6b;
            border: 1px solid #ff6b6b;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            h1 {
                font-size: 22px;
            }

            .stats-container {
                grid-template-columns: repeat(2, 1fr);
            }

            .table-container {
                padding: 10px;
            }

            th, td {
                padding: 10px 5px;
                font-size: 12px;
            }

            .process-count {
                min-width: 28px;
                padding: 3px 6px;
                font-size: 12px;
            }
        }

        /* Loading Spinner */
        .loading {
            text-align: center;
            padding: 40px;
            color: rgba(255, 255, 255, 0.6);
        }

        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 3px solid #2eb872;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Filtros Visuais */
        .filter-tags {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .filter-tag {
            background: rgba(46, 184, 114, 0.2);
            color: #2eb872;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 5px;
            border: 1px solid rgba(46, 184, 114, 0.3);
        }

        .filter-tag .remove {
            cursor: pointer;
            font-weight: bold;
            opacity: 0.7;
            transition: opacity 0.3s;
        }

        .filter-tag .remove:hover {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div class="title-section">
                    <div class="logo-icon">P6</div>
                    <div>
                        <h1>Encarregados - Processos e Procedimentos</h1>
                        <div class="subtitle">Sistema de Gestão P6/7ºBPM - Distribuição de Procedimentos</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Controles -->
        <div class="controls">
            <div class="search-box">
                <span class="search-icon">🔍</span>
                <input type="text" class="search-input" id="searchInput" placeholder="Buscar por nome do encarregado...">
            </div>
            <div class="btn-group">
                <button class="btn active" onclick="setView('all')">
                    <span>👁️</span> Todos
                </button>
                <button class="btn" onclick="setView('active')">
                    <span>✅</span> Com Processos
                </button>
                <button class="btn" onclick="setView('overloaded')">
                    <span>⚠️</span> Sobrecarregados
                </button>
            </div>
            <button class="btn btn-export" onclick="exportData()">
                <span>📊</span> Exportar
            </button>
        </div>

        <!-- Tabela -->
        <div class="table-container">
            <div class="table-wrapper">
                <table id="dataTable">
                    <thead>
                        <tr>
                            <th class="sortable" onclick="sortTable('name')">Encarregado</th>
                            <th class="sortable" onclick="sortTable('sr')">SR</th>
                            <th class="sortable" onclick="sortTable('ipm')">IPM</th>
                            <th class="sortable" onclick="sortTable('pads')">PADS</th>
                            <th class="sortable" onclick="sortTable('pad')">PAD</th>
                            <th class="sortable" onclick="sortTable('cd')">CD</th>
                            <th class="sortable" onclick="sortTable('cj')">CJ</th>
                            <th class="sortable" onclick="sortTable('total')">Total</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Dados serão inseridos via JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Dados dos encarregados - nomes completos
        let encarregados = [
            { name: "1º SGT DIOGO RIBEIRO", sr: 3, ipm: 1, pads: 2, pad: 0, cd: 1, cj: 0 },
            { name: "CAP CARLOS SANTOS", sr: 2, ipm: 2, pads: 4, pad: 1, cd: 0, cj: 1 },
            { name: "MAJ JOÃO OLIVEIRA", sr: 1, ipm: 1, pads: 3, pad: 2, cd: 1, cj: 0 },
            { name: "2º SGT RAFAEL COSTA", sr: 4, ipm: 0, pads: 5, pad: 0, cd: 0, cj: 0 },
            { name: "CB LUCAS PEREIRA", sr: 2, ipm: 1, pads: 1, pad: 1, cd: 0, cj: 0 },
            { name: "TEN MARCELO ALMEIDA", sr: 0, ipm: 0, pads: 0, pad: 0, cd: 0, cj: 0 },
            { name: "CAP ANDRÉ RODRIGUES", sr: 3, ipm: 2, pads: 2, pad: 1, cd: 1, cj: 0 },
            { name: "3º SGT PAULO FERREIRA", sr: 5, ipm: 0, pads: 3, pad: 0, cd: 0, cj: 0 },
            { name: "TEN GABRIEL MARTINS", sr: 1, ipm: 3, pads: 2, pad: 2, cd: 0, cj: 1 },
            { name: "MAJ FELIPE SOUZA", sr: 2, ipm: 1, pads: 1, pad: 1, cd: 1, cj: 0 },
            { name: "CB THIAGO LIMA", sr: 3, ipm: 0, pads: 4, pad: 0, cd: 0, cj: 0 },
            { name: "1º SGT RODRIGO BARBOSA", sr: 1, ipm: 1, pads: 2, pad: 0, cd: 0, cj: 0 },
            { name: "TC MARCOS SILVA", sr: 2, ipm: 2, pads: 1, pad: 1, cd: 0, cj: 1 },
            { name: "SD HENRIQUE GOMES", sr: 1, ipm: 0, pads: 3, pad: 0, cd: 1, cj: 0 },
            { name: "CAP LEONARDO ROCHA", sr: 4, ipm: 1, pads: 2, pad: 1, cd: 0, cj: 0 }
        ];

        // Calcular totais
        encarregados.forEach(enc => {
            enc.total = enc.sr + enc.ipm + enc.pads + enc.pad + enc.cd + enc.cj;
        });

        let currentSort = { field: 'name', order: 'asc' };
        let currentView = 'all';
        let filteredData = [...encarregados];

        // Função para mudar visualização
        function setView(view) {
            currentView = view;
            
            // Atualizar botões
            document.querySelectorAll('.btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.closest('.btn').classList.add('active');
            
            renderTable();
        }

        // Função para renderizar a tabela
        function renderTable() {
            const tableBody = document.getElementById('tableBody');
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            // Filtrar dados
            filteredData = encarregados.filter(enc => {
                const matchesSearch = enc.name.toLowerCase().includes(searchTerm);
                
                if (currentView === 'all') return matchesSearch;
                if (currentView === 'active') return matchesSearch && enc.total > 0;
                if (currentView === 'overloaded') return matchesSearch && enc.total > 7;
                
                return matchesSearch;
            });

            // Ordenar dados
            filteredData.sort((a, b) => {
                let aVal = a[currentSort.field];
                let bVal = b[currentSort.field];
                
                if (typeof aVal === 'string') {
                    aVal = aVal.toLowerCase();
                    bVal = bVal.toLowerCase();
                }
                
                if (currentSort.order === 'asc') {
                    return aVal > bVal ? 1 : -1;
                } else {
                    return aVal < bVal ? 1 : -1;
                }
            });

            // Renderizar linhas
            tableBody.innerHTML = filteredData.map(enc => {
                return `
                    <tr>
                        <td>
                            <div class="encarregado-cell">
                                <div class="encarregado-info">
                                    <span class="encarregado-name">${enc.name}</span>
                                </div>
                            </div>
                        </td>
                        <td><span class="process-count ${enc.sr === 0 ? 'zero' : enc.sr > 3 ? 'high' : enc.sr > 1 ? 'medium' : 'low'}">${enc.sr}</span></td>
                        <td><span class="process-count ${enc.ipm === 0 ? 'zero' : enc.ipm > 2 ? 'high' : enc.ipm > 1 ? 'medium' : 'low'}">${enc.ipm}</span></td>
                        <td><span class="process-count ${enc.pads === 0 ? 'zero' : enc.pads > 3 ? 'high' : enc.pads > 1 ? 'medium' : 'low'}">${enc.pads}</span></td>
                        <td><span class="process-count ${enc.pad === 0 ? 'zero' : enc.pad > 1 ? 'high' : 'low'}">${enc.pad}</span></td>
                        <td><span class="process-count ${enc.cd === 0 ? 'zero' : 'low'}">${enc.cd}</span></td>
                        <td><span class="process-count ${enc.cj === 0 ? 'zero' : 'low'}">${enc.cj}</span></td>
                        <td class="total-cell">${enc.total}</td>
                    </tr>
                `;
            }).join('');
        }

        // Função para ordenar tabela
        function sortTable(field) {
            // Atualizar cabeçalhos
            document.querySelectorAll('th').forEach(th => {
                th.classList.remove('sorted-asc', 'sorted-desc');
            });

            if (currentSort.field === field) {
                currentSort.order = currentSort.order === 'asc' ? 'desc' : 'asc';
            } else {
                currentSort.field = field;
                currentSort.order = 'asc';
            }

            // Adicionar classe ao cabeçalho ordenado
            const th = document.querySelector(`th[onclick="sortTable('${field}')"]`);
            if (th) {
                th.classList.add(currentSort.order === 'asc' ? 'sorted-asc' : 'sorted-desc');
            }

            renderTable();
        }

        // Função para exportar dados
        function exportData() {
            let csv = 'Encarregado,SR,IPM,PADS,PAD,CD,CJ,Total\n';
            
            filteredData.forEach(enc => {
                csv += `"${enc.name}",${enc.sr},${enc.ipm},${enc.pads},${enc.pad},${enc.cd},${enc.cj},${enc.total}\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'encarregados_processos.csv';
            a.click();
            window.URL.revokeObjectURL(url);
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('input', renderTable);

        // Inicializar
        renderTable();
        sortTable('total');
    </script>
</body>
</html>